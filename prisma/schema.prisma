// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Contrato {
  id                     Int                @id @default(autoincrement())
  dataInicio             String
  dataFim                String
  documento              String             @unique
  natureza               String
  pec                    String
  grupoCliente           String
  empresa                String             @db.VarChar(1200)
  negocio                String
  docSolid               String             @db.VarChar(1200)
  retencaoContrato       String
  faturamento            String
  seguros                String
  reajuste               String
  mesReajuste            String
  tipoAss                String
  status                 String
  chamado                String
  resumo                 String?
  lgpd                   Boolean
  limiteResponsabilidade Boolean
  valor                  Decimal            @db.Decimal(11, 2)
  D_E_L_E_T_             String?            @default("")
  aditivos               Aditivo[]
  fileData               ContractFileData[]
  crContrato             CrContrato[]

  @@map("CONTRATO")
}

model Aditivo {
  id                     Int       @id @default(autoincrement())
  diretor                String
  gerente                String
  supervisor             String
  cr                     String
  dataInicio             String
  dataFim                String
  natureza               String
  grupoCliente           String
  empresa                String
  negocio                String
  docSolid               String
  retencaoContrato       String
  faturamento            String
  reajuste               String
  mesReajuste            String
  tipoAss                String
  status                 String
  lgpd                   Boolean
  limiteResponsabilidade Boolean
  valor                  Decimal   @db.Decimal(11, 2)
  documento              Contrato? @relation(fields: [numDocumento], references: [documento])
  numDocumento           String

  @@map("ADITIVO")
}

model ContractFileData {
  id           Int       @id @default(autoincrement())
  originalName String
  mediaName    String
  contentType  String
  contrato     Contrato? @relation(fields: [contratoId], references: [id])
  contratoId   Int

  @@map("DADOS_ARQUIVO")
}

model CentroCusto {
  id             Int    @id @default(autoincrement())
  cr             String @unique
  descricaoCr    String
  pecCr          String
  descricaoPecCr String
  regionalCr     String
  supervisorCr   String
  gerenteCr      String
  diretorCr      String
  diretorExecCr  String
  gerenteRegCr   String

  @@map("CENTRO_CUSTO")
}

model CrContrato {
  id             Int       @id @default(autoincrement())
  pecCr          String?
  descricaoPecCr String?
  cr             String?
  descricaoCr    String?
  regionalCr     String?
  diretorCr      String?
  diretorExecCr  String?
  gerenteRegCr   String?
  gerenteCr      String?
  supervisorCr   String?
  valorCr        Decimal?  @db.Decimal(11, 2)
  numContrato    Contrato? @relation(fields: [numContratoId], references: [documento])
  numContratoId  String

  @@map("CR_CONTRATO")
}
