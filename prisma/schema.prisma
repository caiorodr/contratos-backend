// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model CONTRATO {
  id                     Int            @id @default(autoincrement())
  dataInicio             String
  dataFim                String
  documento              String         @unique
  natureza               String
  grupoCliente           String
  empresa                String         @db.VarChar(1200)
  negocio                String
  docSolid               String         @db.VarChar(1200)
  retencaoContrato       String
  faturamento            String
  seguros                String
  reajuste               String
  dataReajuste           String
  tipoAss                String
  status                 String
  chamado                String
  resumo                 String?
  lgpd                   Boolean
  limiteResponsabilidade Boolean
  valor                  Decimal        @db.Decimal(11, 2)
  docContrato            String?        @db.VarChar(60000) // Sera obrigatorio quando for tratar o pdf como encode64.
  D_E_L_E_T_             String?        @default("")
  aditivos               ADITIVO[]
  fileData               DADO_ARQUIVO[]
  crContrato             CR_CONTRATO[]
}

model ADITIVO {
  id                     Int       @id @default(autoincrement())
  diretor                String
  gerente                String
  supervisor             String
  cr                     String
  dataInicio             String
  dataFim                String
  natureza               String
  grupoCliente           String
  empresa                String
  negocio                String
  docSolid               String
  retencaoContrato       String
  faturamento            String
  reajuste               String
  dataReajuste           String
  tipoAss                String
  status                 String
  lgpd                   Boolean
  limiteResponsabilidade Boolean
  valor                  Decimal   @db.Decimal(11, 2)
  docAditivo             String?   @db.VarChar(60000)
  documento              CONTRATO? @relation(fields: [numDocumento], references: [documento])
  numDocumento           String
}

model DADO_ARQUIVO {
  id           Int       @id @default(autoincrement())
  originalName String
  mediaName    String
  contentType  String
  contrato     CONTRATO? @relation(fields: [contratoId], references: [id])
  contratoId   Int
}

model CENTRO_CUSTO {
  id           Int    @id @default(autoincrement())
  cr           String
  descricaoCr  String
  supervisorCr String
  gerenteCr    String
  diretorCr    String
}

model CR_CONTRATO {
  id            Int       @id @default(autoincrement())
  cr            String
  descricaoCr   String
  supervisorCr  String
  gerenteCr     String
  diretorCr     String
  numContrato   CONTRATO? @relation(fields: [numContratoId], references: [id])
  numContratoId Int
}
